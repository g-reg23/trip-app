{% extends 'layout.html' %}
{% block body %}
  <div class="groupDiv">
      <h1 align="center" class='groupHeading'>Group</h1>
      <div id="groupHeader">
        <h1 style="text-decoration: underline;">{{ group.groupName }}</h1>
          <p class='groupHeadDesc'>{{ group.description }}</p>
          <p>Group Creator: <strong>{{ group.admin }}</strong></p>
          <p class='userNameHid'>{{ current_user.username }}</p>
      </div>
      <div class="calendarDiv">
        <a href='/group/{{group.id}}/calendar' class='gPageCalButton' style='color: dodgerblue'>Group Calendar</a>
      </div>
      <br /><br />
      <!--<div class="picDiv">
        <img class="groupPic" src={{url_for('static', filename = 'images/group_pic.jpeg')}} alt="group-pic" width="50%" />
      </div>-->
      <h1 align="center" class="chatLabel">Chat</h1>
      <div class="chat" id="chat">
           {% for line in history %}
              <div id="chat_message"><strong style="text-decoration: underline;">{{ line.username }}</strong>: {{ line.message }}</div>
          {% endfor %}
      </div>
      <div>
        <form id="messageForm">
          <div class="group-form">
            <textarea placeholder="Your Message here:" id="message"></textarea>
            <input type="submit" class="sign-logSubmit" id="sendChat" value="Send"/>
          </div>
        </form>
      </div>
      <div id="listDiv">
        <h3 align="center" class="onlineTitle">Online Members</h3>
        <ul class="online" id="online">
        </ul>
      </div>
      <div>
        <h3 align="center" class="membersTitle">Group Members</h3>
        <ul class="membersBox">
          {% for member in members %}
            <li class="memListItem">{{ member }}</li>
          {% endfor %}
        </ul>
      </div>
      <h2 align="center" class="pinTitle" text-decoration="underline">Lodgings:</h2><br />
      <div class="renPinRow pinRow">
        {% if renPins %}
          {% for pin in renPins %}
            <div class="pinList lodPins">
              <h3 class='pinHeader'><large><a target="_blank" class='lodPinNames' href="{{ pin.link }}" style='color:darksalmon'>{{ pin.lodgeName }}</a></large></h3>
              <p class='pinP lodPinDispRooms'> {{ pin.rooms }} Bedrooms.</p>
              <p class='lodPinRooms' style='display: none;'>{{pin.rooms}}</p>
              <p class='pinP lodPinDispPrices'>${{ pin.price }} per night.</p>
              <p class='lodPinPrices' style='display: none;'>{{pin.price}}</p>
              <p class='pinP lodPinDescs'> {{ pin.description }}</p>
              <p class='pinP'>Posted by: <strong>{{ pin.creator }}</strong></p>
              <p><a class="pinLinkP" target="_blank" href="{{ pin.link }}">View at site</a></p>
              <p class='lodPinLinks' style='display: none;'>{{pin.link}}</p>
              <p class='lodPinIds' style='display:none;'>{{pin.id}}</p>
              <p class='lodPinCreators' syle='display:none;'>{{ pin.creator }}</p>
              {% if pin.creator == current_user.username %}
                <button class='lodPinEdit pinEdButton'>Edit</button>
                <button class='lodPinDelete pinEdButton'>Delete</button>
              {% endif %}
              <br />
              <!-- {% if user == group.admin or user == pin.creator %}
                <p><a href="/edit_rental_pin/{{ id }}/{{ pin.lodgeName }}" class="pinLink">Edit Pin</a>   <a  href="/delete_rental_pin/{{ id }}/{{ pin.lodgeName }}" class="pinLink">  Delete Pin</a></p>
              {% endif %} -->
            </div>
          {% endfor %}
        {% else %}
          <div class="noPinDiv"><a class="noPinLink" href="#rentalPin">You can pin rental here!</a></div>
        {% endif %}
        <span class='endLodDiv'></span>
      </div><br />
      <div class="editLodPinModal">
        <button class='cornerX lodEditX'>X</button>
        <h3 style='margin-top: -2%;'>Edit Pin</h3>
        <h5 class='lodPinTitle'></h5>
        <input type="text" class='lodPinEditNameValue sign-logInput' placeholder='Name'>
        <input type="number" class='lodPinEditPriceValue sign-logInput' placeholder='Price'>
        <input type='number' class='lodPinEditRoomsValue sign-logInput' placeholder='Rooms'>
        <input type="text" class='lodPinEditLinkValue sign-logInput' placeholder='Link'>
        <textarea class='lodPinEditDescValue sign-logInput' style='height: 2.25rem;' placeholder='Description'></textarea>
        <div class="modalButtonRow">
          <button class='sign-logSubmit submitEditLodModal'>Submit</button>
          <button class='sign-logSubmit cancelEditLodModal'>Cancel</button>
        </div>
      </div>
      <div class="deleteLodPinModal">
        <button class='cornerX lodDeleteX'>X</button>
        <h4>Are you sure want to delete this pin?</h4>
        <h5 class='deleteLodPinTitle'></h5>
        <div class="modalButtonRow">
          <button class='sign-logSubmit submitDeleteLodModal'>Delete</button>
          <button class='sign-logSubmit cancelDeleteLodModal'>Cancel</button>
        </div>
      </div>
      <div class="restPinRow pinRow">
        <h2 align="center" class="pinTitle" text-decoration="underline">Restaurants and Clubs:</h2><br />
        {% if restPins %}
          {% for pinTwo in restPins %}
            <div class="pinList restPins">
              <h3 class='pinHeader restPinNames'><large><a target="_blank" href="{{ pinTwo.link }}"  style='color:darksalmon'>{{ pinTwo.restName }}</a></large></h3>
              <p class='pinP restPinTypes'>{{pinTwo.types}}</p>
              <p class='pinP restPinDescriptions'> {{ pinTwo.description }}</p>
              <p class='pinLinkP'><a class="pinLink" target="_blank" href="{{ pinTwo.link }}">View at site</a></p>
              <p class='restPinLinks' style='display: none;'>{{pinTwo.link}}</p>
              <p class='restPinIds' style='display:none;'>{{pinTwo.id}}</p>
              <p class='restPinCreators' style='display:none;'>{{pinTwo.creator}}</p>
              <p>Posted by: <strong>{{ pinTwo.creator }}</strong></p>
              {% if pinTwo.creator == current_user.username %}
                <button class='restPinEdit pinEdButton'>Edit</button>
                <button class='restPinDelete pinEdButton'>Delete</button>
              {% endif %}
              <br />
              <!-- {% if user == group.admin or user == pinTwo.creator %}
                <p><a href="/edit_restaurant_pin/{{ id }}/{{ pinTwo.restName }}" class="pinLink">Edit Pin</a>   <a  href="/delete_restaurant_pin/{{ id }}/{{ pinTwo.restName }}" class="pinLink">  Delete Pin</a></p>
              {% endif %} -->
            </div>
          {% endfor %}
        {% else %}
          <div class="noPinDiv"><a class="noPinLink" href="#restPin">How about pinning a restaurant or nightclub!</a></div><br />
        {% endif %}
      </div>
      <div class="editRestPinModal">
        <button class='cornerX restEditX'>X</button>
        <h3 style='margin-top: -2%;'>Edit Pin</h3>
        <h5 class='restPinTitle'></h5>
        <input type="text" class='restPinEditNameValue sign-logInput' placeholder='Name'>
        <select class="restPinEditTypeValue sign-logInput" name="type" placeholder='Type'>
          <option value="Restaurant">Restaurant</option>
          <option value="Nightclub">Nightclub</option>
        </select>
        <input type="text" class='restPinEditLinkValue sign-logInput' placeholder='Link'>
        <input class='restPinEditDescValue sign-logInput' style='height: 2.25rem;' placeholder='Description'>
        <div class="modalButtonRow">
          <button class='sign-logSubmit submitEditRestModal'>Submit</button>
          <button class='sign-logSubmit cancelEditRestModal'>Cancel</button>
        </div>
      </div>
      <div class="deleteRestPinModal">
        <button class='cornerX restDeleteX'>X</button>
        <h4>Are you sure want to delete this pin?</h4>
        <h5 class='deleteRestPinTitle'></h5>
        <div class="modalButtonRow">
          <button class='sign-logSubmit submitDeleteRestModal'>Delete</button>
          <button class='sign-logSubmit cancelDeleteRestModal'>Cancel</button>
        </div>
      </div>
      <div class="transPinRow pinRow">
        <h2 align="center" class="pinTitle" text-decoration="underline">Transportation:</h2><br />
        {% if transpoPins %}
          {% for pinThree in transpoPins %}
            <div class="pinList transPins">
              <h3 class='pinHeader transPinNames'><large><a target="_blank" href="{{ pinThree.link }}"  style='color:darksalmon'>{{ pinThree.transpoName }}</a></large></h3>
              <p class='pinP transPinPriceDisp'>${{ pinThree.price }}</p>
              <p class='transPinPrice' style='display:none;'>{{pinThree.price}}</p>
              <p class='pinP transPinDescs'>{{ pinThree.description }}</p>
              <p class='pinP transPinTypes'>{{ pinThree.types }}</p>
              <p class='pinLinkP'><a class="pinLink" target="_blank" href="{{ pinThree.link }}">View at site</a></p>
              <p class='transPinLinks' style='display: none;'>{{pinThree.link}}</p>
              <p class='transPinIds' style='display:none;'>{{pinThree.id}}</p>
              <p>Posted by: <strong>{{ pinThree.creator }}</strong></p>
              <p class='transPinCreators' style='display:none;'>{{ pinThree.creator }}</p>
              {% if pinThree.creator == current_user.username %}
                <button class='transPinEdit pinEdButton'>Edit</button>
                <button class='transPinDelete pinEdButton'>Delete</button>
              {% endif %}
              <br />
              <!-- {% if user == group.admin or user == pinThree.creator %}
                <p><a href="/edit_transportation_pin/{{ id }}/{{ pinThree.transpoName }}" class="pinLink">Edit Pin</a>   <a  href="/delete_transportation_pin/{{ id }}/{{ pinThree.transpoName }}" class="pinLink">  Delete Pin</a></p>
              {% endif %} -->
            </div>
          {% endfor %}
        {% else %}
          <div class="noPinDiv"><a class="noPinLink" href="#transpoPin">You can pin differrent transportation too!</a></div><br />
        {% endif %}
      </div>
      <div class="editTransPinModal">
        <button class='cornerX transEditX'>X</button>
        <h3 style='margin-top: -2%;'>Edit Pin</h3>
        <h5 class='transPinTitle'></h5>
        <input type="text" class='transPinEditNameValue sign-logInput' placeholder='Name'>
        <input type='number' class='transPinEditPriceValue sign-logInput' placeholder='Price'>
        <select class="transPinEditTypeValue sign-logInput" name="type" placeholder='Type'>
          <option value="Flight">Flight</option>
          <option value="Train">Train</option>
          <option value='Bus'>Bus</option>
          <option value='Rental Car'>Rental Car</option>
          <option value='Other'>Other</option>
        </select>
        <input type="text" class='transPinEditLinkValue sign-logInput' placeholder='Link'>
        <input class='transPinEditDescValue sign-logInput' style='height: 2.25rem;' placeholder='Description'>
        <div class="modalButtonRow">
          <button class='sign-logSubmit submitEditTransModal'>Submit</button>
          <button class='sign-logSubmit cancelEditTransModal'>Cancel</button>
        </div>
      </div>
      <div class="deleteTransPinModal">
        <button class='cornerX transDeleteX'>X</button>
        <h4>Are you sure want to delete this pin?</h4>
        <h5 class='deleteTransPinTitle'></h5>
        <div class="modalButtonRow">
          <button class='sign-logSubmit submitDeleteTransModal'>Delete</button>
          <button class='sign-logSubmit cancelDeleteTransModal'>Cancel</button>
        </div>
      </div>
      <div class="actPinRow pinRow">
        <h2 align="center" class="pinTitle" text-decoration="underline">Activities and Events:</h2><br />
        {% if activityPins %}
          {% for pinFour in activityPins %}
            <div class="pinList actPins">
              <h3 class='pinHeader actPinNames'><large><a target="_blank" href="{{ pinFour.link }}" style='color:darksalmon'>{{ pinFour.activityName }}</a></large></h3>
              <p class='actPinPriceDisplay pinP'>${{ pinFour.price }}</p>
              <p class='actPinPrice' style='display:none;'>{{ pinFour.price }}</p>
              <p class='pinP actPinTypes'>{{ pinFour.types }}</p>
              <p class='pinP actPinDescriptions'>{{ pinFour.description }}</p>
              <p class=pinLinkP><a class="pinLink" target="_blank" href="{{ pinFour.link }}">View at site</a></p>
              <p class='actPinLinks' style='display:none;'>{{ pinFour.link }}</p>
              <p class='actPinCreators'>{{ pinFour.creator }}</p>
              <p class='actPinIds' style='display: none;'>{{ pinFour.id }}</p>
              <p>Posted by: <strong>{{ pinFour.creator }}</strong></p>
              {% if pinFour.creator == current_user.username %}
                <button class='actPinEdit pinEdButton'>Edit</button>
                <button class='actPinDelete pinEdButton'>Delete</button>
              {% endif %}
              <br />
              <!-- {% if user == group.admin or user == pinFour.creator %}
                <p><a href="/edit_activity_pin/{{ id }}/{{ pinFour.activityName }}" class="pinLink">Edit Pin</a>   <a  href="/delete_activity_pin/{{ id }}/{{ pinFour.activityName }}" class="pinLink">  Delete Pin</a></p>
              {% endif %} -->
            </div>
          {% endfor %}
        {% else %}
          <div class="noPinDiv"><a class="noPinLink" href="#activityPin"  style='color:darksalmon'>This area could use an activity pin or two!</a></div><br />
        {% endif %}
        <div class="editActPinModal">
          <button class='cornerX actEditX'>X</button>
          <h3 style='margin-top: -2%;'>Edit Pin</h3>
          <h5 class='actPinTitle'></h5>
          <input type="text" class='actPinEditNameValue sign-logInput' placeholder='Name'>
          <input type='number' class='actPinEditPriceValue sign-logInput' placeholder='Price'>
          <select class="actPinEditTypeValue sign-logInput" name="type" placeholder='Type'>
            <option value="Indoor">Indoor</option>
            <option value="Outdoor">Outdoor</option>
          </select>
          <input type="text" class='actPinEditLinkValue sign-logInput' placeholder='Link'>
          <input class='actPinEditDescValue sign-logInput' style='height: 2.25rem;' placeholder='Description'>
          <div class="modalButtonRow">
            <button class='sign-logSubmit submitEditActModal'>Submit</button>
            <button class='sign-logSubmit cancelEditActModal'>Cancel</button>
          </div>
        </div>
        <div class="deleteActPinModal">
          <button class='cornerX actDeleteX'>X</button>
          <h4>Are you sure want to delete this pin?</h4>
          <h5 class='deleteActPinTitle'></h5>
          <div class="modalButtonRow">
            <button class='sign-logSubmit submitDeleteActModal'>Delete</button>
            <button class='sign-logSubmit cancelDeleteActModal'>Cancel</button>
          </div>
        </div>
      </div>
      <div class='budgetDiv'>
        <h3 class='finTitle'>Trip Budget</h3>
        <div class='calculatorResults budget'>${{ budget.total }}</div>
        <input type='submit' value='Change Budget' class='budgetSubmit2 sign-logSubmit'>
        <div class='budgetForm'>
          <p>Enter your trip budget here, then add your expenses below, and we'll help you stay within budget!!</p>
          <form class="" action="" method="POST">
            <div>{{ budgetForm.hidden_tag() }}</div>
            <div>{{ budgetForm.budget(class='sign-logInput budgetInput') }}</div>
            <div><button class='sign-logSubmit budgetSubmit'>Calculate</button></div>
          </form>
        </div>
      </div>
      <div class='calcDiv'>
        <h3 class='finTitle'>Expense Calculator</h3>
        <p>Add your estimated trip expenses here. Enter the number of payments and amount of people which you will split
        each expense. If it is a one time payment split one way, set both # of payments and # of people to split to 1.
        </p>
        <!-- <input type="text" class="sign-logInput calcName" placeholder="Name"> -->
        <form class="expenseForm" method='POST' action=''>
          <div>{{ expenseForm.hidden_tag() }}</div>
          <div><input type='text' placeholder='Expense Name' class='sign-logInput calcName'></div>
          <input type='number' placeholder='Price $' class='sign-logInput calcPrice'>
          <input type='number' placeholder='# of Payments' class='sign-logInput calcPays'>
          <input type='number' placeholder='# of People to Split Cost' class='sign-logInput calcDivideBy'>
          <select class='sign-logInput calcType'>
            <option value="Rental">Rental</option>
            <option value="Food/Drink">Food/Drink</option>
            <option value="Transportation">Transportation</option>
            <option value="Activity">Activity</option>
          </select>
          <div><button class='sign-logSubmit expenseSubmit'>Calculate</button></div>
          <!-- <input type="number" class="sign-logInput" id="calcPrice" placeholder="Price">
          <input type="number" class="sign-logInput" id="calcDays" placeholder="# of Payments">
          <input type="number" class="sign-logInput" id="calcDivideBy" placeholder="# of people to split">
          <select class="sign-logInput" id="calcSelect">
            <option align="center" selected value="">Type:</option>
            <option value="rental">Rental</option>
            <option value="food/drink">Food/Drink</option>
            <option value="transportation">Transportation</option>
            <option value="activity">Activity</option>
            <option value="other">Other</option>
          </select>
          <input class="sign-logSubmit" id="calcSubmit" style="width: 45%;" value='Calculate' type='submit'> -->
        </form>
      </div>
      <div class='expenseOneModal'>
        <span class='expModalTitle'>Are You Sure You Want To Delete This Expense?</span>
        <button class='yesExpOne sign-logSubmit'>Yes</button>
        <button class='noExpOne sign-logSubmit'>No</button>
      </div>
      <div class='expenseAllModal'>
        <span class='expModalTitle'>Are You Sure You Want To Delete All Expenses?</span>
        <button class='yesExpAll sign-logSubmit'>Yes</button>
        <button class='noExpAll sign-logSubmit'>No</button>
      </div>
      <div class='budgetNum' style='display:none;'>{{budget.total}}</div>
      <div class="results">
        <h3 class='resultsTitle'>Individual Expenses:</h3>
          {% for expense in expenses %}
            <ol class="resultList" style="display:none;">
              <li class='budgetNum'>{{budget.total}}</li>
              <li class="expenseNames">{{expense.name}}</li>
              <li class="expenseCosts">{{expense.cost}}</li>
              <li class="expensePays">{{expense.payments}}</li>
              <li class="expenseSplits">{{expense.splits}}</li>
              <li class="expenseTypes">{{expense.type}}</li>
            </ol>
          {% endfor %}
        <button class="expenseDelete sign-logInput">Clear All Expenses</button>
        <div class="totalResult"></div>
      </div>
      <div class='renPinDiv'>
        <form method="POST" action="" align="center" class='renPinForm'>
          <div class="renPinnerForm pinnerForm" id="rentalPin"><h3 class="pinFormTitle" align="center">Pin a Lodging</h3>
            <div class='pinStart'>{{ pinForm.hidden_tag() }}</div>
            <div>{{ pinForm.rentalName(class="pinInput renName") }}</div>
            <div>{{ pinForm.price(class="pinInput renPrice") }}</div>
            <div>{{ pinForm.rooms(class="pinInput renRooms") }}</div>
            <div>{{ pinForm.description(class="pinInput descriptionPin renDescript") }}</div>
            <div><input type="text" class='pinInput descriptionPin renLink' placeholder='Link to Rental'></div>
            <div><button class="pinInput pinSubmit renSub">Submit</button></div>
          </div>
        </form>
      </div>
      <div class='restPinDiv'>
        <form method="POST" action="" align="center">
          <div class="pinnerForm restPinnerForm" id="restPin"><h3 class="pinFormTitle" align="center">Pin a Restaurant or Nightclub</h3>
            <div class=restPinStart>{{ pinFormTwo.hidden_tag() }}</div>
            <div>{{ pinFormTwo.restName(class="pinInput restName") }}</div>
            <div>{{ pinFormTwo.description2(class="pinInput descriptionPin restDescript") }}</div>
            <div>{{ pinFormTwo.link2(class="pinInput restLink") }}</div>
            <div>{{ pinFormTwo.type(class="pinInput selectorPin restType") }}</div>
            <div><button class="pinInput pinSubmit restSub">Submit</button></div>
          </div>
        </form>
      </div>
      <div class='transPinDiv'>
        <form method="POST" action="" align="center">
          <div class="pinnerForm transPinnerForm" id="transpoPin"><h3 class="pinFormTitle" align="center">Pin Transportation</h3>
            <div class='transPinStart'>{{ pinFormThree.hidden_tag() }}</div>
            <div>{{ pinFormThree.name(class="pinInput transName") }}</div>
            <div>{{ pinFormThree.price3(class="pinInput transPrice") }}</div>
            <div>{{ pinFormThree.description3(class="pinInput descriptionPin transDescript") }}</div>
            <div>{{ pinFormThree.link3(class="pinInput transLink") }}</div>
            <div>{{ pinFormThree.type(class="pinInput selectorPin transType") }}</div>
            <div><button class="pinInput pinSubmit transSub">Submit</button></div>
          </div>
        </form>
      </div>
      <div class='actPinDiv'>
        <form method="POST" action="" align="center">
          <div class="actPinnerForm pinnerForm" id="activityPin"><h3 class="pinFormTitle" align="center">Pin an Activity</h3>
            <div class='actPinStart'>{{ pinFormFour.hidden_tag() }}</div>
            <div>{{ pinFormFour.activityName(class="pinInput actName") }}</div>
            <div><input type='number' placeholder='Price' class="pinInput actPrice"></div>
            <div>{{ pinFormFour.description(class="pinInput descriptionPin actDescript") }}</div>
            <div>{{ pinFormFour.link(class="pinInput actLink") }}</div>
            <div>{{ pinFormFour.type(class="pinInput selectorPin actType") }}</div>
            <div><button class="pinInput pinSubmit actSub">Submit</button></div>
          </div>
        </form>
      </div>
      <footer class="groupFooter">
        <div>
          <table class="groupTable" border="" cellpadding="1" cellspacing=".5" align="center">
            <tr>
              <th>Group Name</th>
              <th>Group Admin</th>
              <th>Start Date</th>
              <th>End Date</th>
              <th>Group #</th>
              <th>Create Date</th>
            </tr>
            <tr>
              <td>{{group.groupName}}</td>
              <td>{{group.admin}}</td>
              <td>{{group.startDate}}</td>
              <td>{{group.endDate}}</td>
              <td id="groupId" align="center">{{group.id}}</td>
              <td>{{group.createDate}}</td>
            </tr>
          </table>
        </div>
      </footer>
      <!-- <div>Icons made by <a href="https://www.flaticon.com/authors/dave-gandy" title="Dave Gandy">Dave Gandy</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div> -->
  </div>
  <script src="{{url_for('static', filename = 'app.js')}}"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
  <!-- <script src="http://code.jquery.com/jquery-latest.min.js"></script> -->
  <!-- <script src="{{url_for('static', filename = 'group.js')}}"></script> -->
  <script type="text/javascript" charset="utf-8">
    {
        // Declare variables in global object
        function Globals() {
          this.id = document.querySelector('#groupId').textContent;
          this.socket = io.connect('http://' + document.domain + ':' + location.port + '/chat');
          this.message = document.querySelector('#message');
          this.messageForm = document.querySelector('#messageForm');
          this.chat = document.querySelector('#chat');
          this.groupPageFlash = document.querySelector('.flashMessage');
          this.online = document.querySelector('#online')
          this.arr = [];
          this.arrTwo = [];
          this.username = document.querySelector('.userNameHid').textContent;
          this.mems = document.querySelectorAll('.memListItem');
          this.results = document.querySelector('.results');
          this.totResult = document.querySelector('.totalResult');
          this.changeBudget = document.querySelector('.budgetSubmit2');
          this.budgetForm = document.querySelector('.budgetForm');
          this.expenseForm = document.querySelector('.expenseForm');
          this.budget = parseInt(document.querySelector('.budgetNum').textContent);
          this.exNames = document.querySelectorAll('.expenseNames');
          this.exCosts = document.querySelectorAll('.expenseCosts');
          this.exPays = document.querySelectorAll('.expensePays');
          this.exSplits = document.querySelectorAll('.expenseSplits');
          this.exTypes = document.querySelectorAll('.expenseTypes');
          this.exDelBut = document.querySelector('.expenseDelete');
          this.calculate = document.querySelector('#submit6');
          this.calcDiv = document.querySelector('.calcDiv');
          this.allExpModal = document.querySelector('.expenseAllModal');
          this.yesExpAll = document.querySelector('.yesExpAll');
          this.noExpAll = document.querySelector('.noExpAll');
          this.oneExpModal = document.querySelector('.expenseOneModal');
          this.yesExpOne = document.querySelector('.yesExpOne');
          this.noExpOne = document.querySelector('.noExpOne');
          this.totExp = 0;
          this.expenseToDelete;
          this.price = document.querySelector('.calcPrice');
          this.pays = document.querySelector('.calcPays');
          this.divisor = document.querySelector('.calcSplits');
          this.type = document.querySelector('.calcType');
          this.exSubmit = document.querySelector('.expenseSubmit');
          this.budgeSubmit = document.querySelector('.budgetSubmit');
          this.expenseArray = [];
          this.budgetDiv = document.querySelector('.budgetDiv');
          this.budgetInput = document.querySelector('.budgetInput');
          this.pinInputs = document.querySelectorAll('.pinInput');
          this.Lodging = function(name, price, rooms, description, link, creator, pinId) {
            this.name = name;
            this.price = price;
            this.rooms = rooms;
            this.description = description;
            this.link = link;
            this.creator = creator;
            this.id = pinId;
          }
          this.Restaurant = function(name, type, description, link, creator, id) {
            this.name = name;
            this.type = type;
            this.description = description;
            this.link = link;
            this.creator = creator;
            this.id = id;
          }
          this.Transport = function(name, price, type, desc, link, creator, id) {
            this.name = name;
            this.price = price;
            this.type = type
            this.description = desc;
            this.link = link;
            this.creator = creator;
            this.id = id;
          }
          this.Activity = function(name, price, type, desc, link, creator, id){
            this.name = name;
            this.price = price;
            this.type = type;
            this.description = desc;
            this.link = link;
            this.creator = creator;
            this.id = id;
          }
          this.lodgings = [];
          this.restaurants = [];
          this.transpos = [];
          this.activities = [];
          this.lodPins = document.querySelectorAll('.lodPins');
          this.lodPinNames = document.querySelectorAll('.lodPinNames');
          this.lodPinPrices = document.querySelectorAll('.lodPinPrices');
          this.lodPinRooms = document.querySelectorAll('.lodPinRooms');
          this.lodPinDescs = document.querySelectorAll('.lodPinDescs');
          this.lodPinLinks = document.querySelectorAll('.lodPinLinks');
          this.lodPinIds = document.querySelectorAll('.lodPinIds');
          this.lodPinCreators = document.querySelectorAll('.lodPinCreators')
          this.restPins = document.querySelectorAll('.restPins');
          this.restPinNames = document.querySelectorAll('.restPinNames');
          this.restPinTypes = document.querySelectorAll('.restPinTypes');
          this.restPinDescriptions = document.querySelectorAll('.restPinDescriptions');
          this.restPinLinks = document.querySelectorAll('.restPinLinks')
          this.restPinIds = document.querySelectorAll('.restPinIds');
          this.restPinCreators = document.querySelectorAll('.restPinCreators');
          this.editLodPinModal = document.querySelector('.editLodPinModal');
          this.transPins = document.querySelectorAll('.transPins');
          this.transPinNames = document.querySelectorAll('.transPinNames');
          this.transPinPrice = document.querySelectorAll('.transPinPrice');
          this.transPinTypes = document.querySelectorAll('.transPinTypes');
          this.transPinDescs = document.querySelectorAll('.transPinDescs');
          this.transPinLinks = document.querySelectorAll('.transPinLinks');
          this.transPinCreators = document.querySelectorAll('.transPinCreators');
          this.transPinIds = document.querySelectorAll('.transPinIds');
          this.actPins = document.querySelectorAll('.actPins')
          this.actPinNames = document.querySelectorAll('.actPinNames');
          this.actPinPrice = document.querySelectorAll('.actPinPrice');
          this.actPinTypes = document.querySelectorAll('.actPinTypes');
          this.actPinLinks = document.querySelectorAll('.actPinLinks');
          this.actPinCreators = document.querySelectorAll('.actPinCreators');
          this.actPinIds = document.querySelectorAll('.actPinIds');
          this.actPinDescriptions = document.querySelectorAll('.actPinDescriptions');
          this.lodgingIndex = 0;
          this.restIndex = 0;
          this.transIndex = 0;
          this.actIndex = 0;
          this.editLodInputName = document.querySelector('.lodPinEditNameValue');
          this.editLodInputRooms = document.querySelector('.lodPinEditRoomsValue');
          this.editLodInputPrice = document.querySelector('.lodPinEditPriceValue');
          this.editLodInputDesc = document.querySelector('.lodPinEditDescValue');
          this.editLodInputLink = document.querySelector('.lodPinEditLinkValue');
        }
        Globals.prototype.getLodgings = function() {
          if (global.lodPins.length > 0) {
            global.lodPins.forEach(function(pin, index) {
              global.lodgings.push(new global.Lodging(global.lodPinNames[index].textContent, parseInt(global.lodPinPrices[index].textContent), global.lodPinRooms[index].textContent, global.lodPinDescs[index].textContent, global.lodPinLinks[index].textContent, global.lodPinCreators[index].textContent, parseInt(global.lodPinIds[index].textContent)))
            })
          }else {
            return;
          }
          return global.lodgings;
        }
        Globals.prototype.getRestaurants = function() {
          if (global.restPins.length > 0) {
            global.restPins.forEach(function(pin, index) {
              global.restaurants.push(new global.Restaurant(global.restPinNames[index].textContent, global.restPinTypes[index].textContent, global.restPinDescriptions[index].textContent, global.restPinLinks[index].textContent, global.restPinCreators[index].textContent, parseInt(global.restPinIds[index].textContent)))
            })
          }else {
            return
          }
          return global.restaurants;
        }
        Globals.prototype.getTranspos = function() {
          if (global.transPins.length > 0) {
            global.transPins.forEach(function(pin, index) {
              global.transpos.push(new global.Transport(global.transPinNames[index].textContent, parseInt(global.transPinPrice[index].textContent), global.transPinTypes[index].textContent, global.transPinDescs[index].textContent, global.transPinLinks[index].textContent, global.transPinCreators[index].textContent, parseInt(global.transPinIds[index].textContent)))
            })
          } else {
            return
          }
          return global.transpos
        }
        Globals.prototype.getActivities = function() {
          if (global.actPins.length > 0) {
            global.actPins.forEach(function(pin, index) {
              global.activities.push(new global.Activity(global.actPinNames[index].textContent, parseInt(global.actPinPrice[index].textContent), global.actPinTypes[index].textContent, global.actPinDescriptions[index].textContent, global.actPinLinks[index].textContent, global.actPinCreators[index].textContent, parseInt(global.actPinIds[index].textContent)))
            })
          } else {
            return;
          }
          return global.activities
        }
        Globals.prototype.exes = function(){
          let arr = [];
          if (global.exNames != null) {
            global.exNames.forEach(function(name, index) {
              // arr.push(new Expense(name.textContent, global.exCosts[index].textContent, global.exPays[index].textContent, global.exSplits[index].textContent, global.exTypes[index].textContent))
              arr.push(new Expense(name.textContent, global.exCosts[index].textContent, global.exPays[index].textContent, global.exSplits[index].textContent, global.exTypes[index].textContent))
            });
          }
          return arr;
        }
        var global = new Globals();
        global.lodgings = global.getLodgings();
        global.restaurants = global.getRestaurants();
        global.transports = global.getTranspos();
        global.activities = global.getActivities()
        // console.log(global.lodgings);
        // console.log(global.lodgings);
        global.pinInputs.forEach(function(input) {
          if(input.classList.contains('selectorPin')) {
            input.selectedIndex = 0;
          }else {
            input.value = '';
          }
        })
        //Each Expense has a name, cost, amount of payments(pays), amount people splitting(splits), and type(ie 'Rental')
        function Expense(name, cost, pays, splits, type) {
          this.name = name;
          this.cost = cost;
          this.pays = pays;
          this.splits = splits;
          this.totalCost = (cost * pays / splits).toFixed(2);
          this.type = type;
        }
        // Expenses is just the total cost of all expenses and the total number of expenses
        function Expenses(total, count) {
          this.total = total;
          this.count = count
        }
        // Load Event Listeners
        function loadEventListeners() {
          global.changeBudget.addEventListener('click', newBudget)
          global.exDelBut.addEventListener('click', showAllModal);
          global.yesExpAll.addEventListener('click', deleteAllExpenses);
          global.noExpAll.addEventListener('click', noExpModal);
          global.noExpOne.addEventListener('click', noExpModalAll);
          global.results.addEventListener('click', showOneModal)
          //global.calculate.addEventListener('click', calc);
          global.yesExpOne.addEventListener('click', deleteOneExpense);
          global.messageForm.addEventListener('submit', sendMessage);
          global.exSubmit.addEventListener('click', submitExpense);
          global.budgeSubmit.addEventListener('click', changeBudget);
          document.querySelector('.renSub').addEventListener('click', rentalSubmit);
          document.querySelector('.restSub').addEventListener('click', restSubmit);
          document.querySelector('.transSub').addEventListener('click', transSubmit);
          document.querySelector('.actSub').addEventListener('click', actSubmit);
          document.querySelector('.renPinRow').addEventListener('click', showEditLodPinModal);
          global.editLodPinModal.querySelector('.lodEditX').addEventListener('click', hideEditLodPinModal);
          global.editLodPinModal.querySelector('.cancelEditLodModal').addEventListener('click', hideEditLodPinModal);
          global.editLodPinModal.querySelector('.submitEditLodModal').addEventListener('click', subEditLodModal);
          document.querySelector('.renPinRow').addEventListener('click', showDeleteLodPinModal);
          document.querySelector('.lodDeleteX').addEventListener('click', hideDeleteLodPinModal);
          document.querySelector('.cancelDeleteLodModal').addEventListener('click', hideDeleteLodPinModal);
          document.querySelector('.submitDeleteLodModal').addEventListener('click', submitDeleteLodModal);
          document.querySelector('.restPinRow').addEventListener('click', showEditRestPinModal);
          document.querySelector('.restEditX').addEventListener('click', hideEditRestPinModal);
          document.querySelector('.cancelEditRestModal').addEventListener('click', hideEditRestPinModal);
          document.querySelector('.submitEditRestModal').addEventListener('click', submitEditRestModal);
          document.querySelector('.restPinRow').addEventListener('click', showDeleteRestModal);
          document.querySelector('.restDeleteX').addEventListener('click', hideDeleteRestPinModal);
          document.querySelector('.cancelDeleteRestModal').addEventListener('click', hideDeleteRestPinModal);
          document.querySelector('.submitDeleteRestModal').addEventListener('click', submitDeleteRestPin);
          document.querySelector('.transPinRow').addEventListener('click', showEditTransPinModal);
          document.querySelector('.transPinRow').addEventListener('click', showDeleteTransModal);
          document.querySelector('.transDeleteX').addEventListener('click', hideDeleteTransModal);
          document.querySelector('.cancelDeleteTransModal').addEventListener('click', hideDeleteTransModal);
          document.querySelector('.transEditX').addEventListener('click', hideEditTransPinModal);
          document.querySelector('.cancelEditTransModal').addEventListener('click', hideEditTransPinModal);
          document.querySelector('.submitDeleteTransModal').addEventListener('click', submitDeleteTransPin)
          document.querySelector('.submitEditTransModal').addEventListener('click', submitEditTransPin);
          document.querySelector('.actPinRow').addEventListener('click', showEditActPin);
          document.querySelector('.actEditX').addEventListener('click', hideEditActPin);
          document.querySelector('.cancelEditActModal').addEventListener('click', hideEditActPin);
          document.querySelector('.actPinRow').addEventListener('click', showDeleteActPinModal);
          document.querySelector('.actDeleteX').addEventListener('click', hideDeleteActPinModal);
          document.querySelector('.cancelDeleteActModal').addEventListener('click', hideDeleteActPinModal);
          document.querySelector('.submitDeleteActModal').addEventListener('click', submitDeleteActPin);
          document.querySelector('.submitEditActModal').addEventListener('click', submitEditActModal);
        }
        loadEventListeners();

        // If there are expenses; run populateExpenses to display them
        global.expenseArray = global.exes()
        if (global.expenseArray.length > 0) {
          populateExpenses(global.expenseArray);
        }
        function submitEditActModal(e) {
          // console.log(e.target.parentElement.parentElement.firstChild.nextElementSibling.nextElementSibling.nextElementSibling.textContent);
          let currentIndex = global.activities.findIndex(act => act.name === e.target.parentElement.parentElement.firstChild.nextElementSibling.nextElementSibling.nextElementSibling.textContent)
          global.socket.emit('edit act pin', document.querySelector('.actPinEditNameValue').value, document.querySelector('.actPinEditPriceValue').value, document.querySelector('.actPinEditTypeValue').value, document.querySelector('.actPinEditDescValue').value, document.querySelector('.actPinEditLinkValue').value, global.activities[currentIndex].id)
          document.querySelector('.editActPinModal').style.display = 'none';
        }
        function submitDeleteActPin(e) {
          // console.log(e.target.parentElement.parentElement.firstChild.nextElementSibling.nextElementSibling.nextElementSibling.textContent)
          let currentIndex = global.activities.findIndex(act => act.name === e.target.parentElement.parentElement.firstChild.nextElementSibling.nextElementSibling.nextElementSibling.textContent)
          global.socket.emit('delete act pin', global.activities[currentIndex].name, global.activities[currentIndex].id)
          document.querySelector('.deleteActPinModal').style.display = 'none';
        }
        function hideDeleteActPinModal(e) {
          document.querySelector('.deleteActPinModal').style.display = 'none';
        }
        function showDeleteActPinModal(e) {
          if (e.target.classList.contains('actPinDelete')) {
            document.querySelector('.deleteActPinModal').style.display = 'block';
            let currentIndex = global.activities.findIndex(act => act.name === e.target.parentElement.firstChild.nextElementSibling.textContent)
            let currentAct = global.activities[currentIndex];
            // global.activities.forEach(function(act, index) {
            //   if (act.name === e.target.parentElement.firstChild.nextElementSibling.textContent) {
            //     currentAct = act;
            //     global.actIndex = index;
            //   }
            // })
            document.querySelector('.deleteActPinTitle').textContent = currentAct.name;
          }
        }
        function showEditActPin(e) {
          if (e.target.classList.contains('actPinEdit')) {
            document.querySelector('.editActPinModal').style.display = 'block';
            // console.log(e.target.parentElement.firstChild.nextElementSibling.textContent)
            let currentIndex = global.activities.findIndex(act => act.name === e.target.parentElement.firstChild.nextElementSibling.textContent);
            global.actIndex = currentIndex
            let currentAct = global.activities[currentIndex];
            document.querySelector('.actPinTitle').textContent = currentAct.name;
            document.querySelector('.actPinEditNameValue').value = currentAct.name;
            document.querySelector('.actPinEditPriceValue').value = currentAct.price;
            // document.querySelector('actPinEditTypeValue').value = currentAct.type;
            document.querySelector('.actPinEditDescValue').value = currentAct.description;
            document.querySelector('.actPinEditLinkValue').value = currentAct.link;
          }
        }
        function hideEditActPin(e) {
          document.querySelector('.editActPinModal').style.display = 'none';
        }
        function submitEditTransPin(e) {
          global.socket.emit('edit trans pin', document.querySelector('.transPinEditNameValue').value, document.querySelector('.transPinEditPriceValue').value, document.querySelector('.transPinEditLinkValue').value, document.querySelector('.transPinEditDescValue').value, document.querySelector('.transPinEditTypeValue').value, global.transpos[global.transIndex].id)
          document.querySelector('.editTransPinModal').style.display = 'none';
        }
        function submitDeleteTransPin(e) {
          global.socket.emit('delete trans pin', global.transpos[global.transIndex].id, global.transpos[global.transIndex].name);
          document.querySelector('.deleteTransPinModal').style.display = 'none';
        }
        function hideDeleteTransModal(e) {
          document.querySelector('.deleteTransPinModal').style.display = 'none';
        }
        function hideEditTransPinModal(e) {
          document.querySelector('.editTransPinModal').style.display = 'none';
        }
        function showDeleteTransModal(e) {
          if (e.target.classList.contains('transPinDelete')) {
            document.querySelector('.deleteTransPinModal').style.display = 'block';
            let currentTrans;
            global.transpos.forEach(function(trans, index) {
              if (trans.name === e.target.parentElement.firstChild.nextElementSibling.textContent) {
                currentTrans = trans;
                global.transIndex = index;
              }
            })
            document.querySelector('.deleteTransPinTitle').textContent = currentTrans.name;
          }
        }
        function showEditTransPinModal(e) {
          if (e.target.classList.contains('transPinEdit')) {
            document.querySelector('.editTransPinModal').style.display = 'block';
            let currentTrans;
            global.transpos.forEach(function(trans, index) {
              if (trans.name === e.target.parentElement.firstChild.nextElementSibling.textContent) {
                currentTrans = trans;
                global.transIndex = index;
              }
            })
            document.querySelector('.transPinTitle').textContent = currentTrans.name;
            document.querySelector('.transPinEditNameValue').value = currentTrans.name;
            document.querySelector('.transPinEditPriceValue').value = currentTrans.price;
            document.querySelector('.transPinEditDescValue').value = currentTrans.description;
            document.querySelector('.transPinEditLinkValue').value = currentTrans.link;
            switch (currentTrans.type) {
              case 'Flight':
                document.querySelector('.transPinEditTypeValue').selectedIndex = '0';
                break;
              case 'Train':
                document.querySelector('.transPinEditTypeValue').selectedIndex = '1';
                break;
              case 'Bus':
                document.querySelector('.transPinEditTypeValue').selectedIndex = '2';
                break;
              case 'Car':
                document.querySelector('.transPinEditTypeValue').selectedIndex = '3'
                break;
              case 'Other':
                document.querySelector('.transPinEditTypeValue').selectedIndex = '4';
                break;
            }
          }
        }
        function submitDeleteRestPin(e) {
          global.socket.emit('delete restaurant', global.restaurants[global.restIndex].name, global.restaurants[global.restIndex].id);
          document.querySelector('.deleteRestPinModal').style.display = 'none';
        }
        function submitEditRestModal(e) {
          global.socket.emit('edit restaurant', document.querySelector('.restPinEditNameValue').value, document.querySelector('.restPinEditTypeValue').value, document.querySelector('.restPinEditDescValue').value, document.querySelector('.restPinEditLinkValue').value, global.restaurants[global.restIndex].id)
          document.querySelector('.editRestPinModal').style.display = 'none';
        }
        function hideEditRestPinModal(e) {
          document.querySelector('.editRestPinModal').style.display = 'none';
        }
        function showEditRestPinModal(e) {
          if (e.target.classList.contains('restPinEdit')) {
            document.querySelector('.editRestPinModal').style.display = 'block';
            // console.log(e.target.parentElement.firstChild.nextElementSibling.textContent)
            let currentRest;
            global.restaurants.forEach(function(rest, index) {
              if (rest.name === e.target.parentElement.firstChild.nextElementSibling.textContent) {
                currentRest = rest;
                global.restIndex = index;
              }
            })
            document.querySelector('.restPinTitle').textContent = currentRest.name;
            document.querySelector('.restPinEditNameValue').value = currentRest.name;
            if (currentRest.type === 'Nightclub') {
              document.querySelector('.restPinEditTypeValue').selectedIndex = '1';
            } else {
              document.querySelector('.restPinEditTypeValue').selectedIndex = '0';
            }
            document.querySelector('.restPinEditLinkValue').value = currentRest.link;
            document.querySelector('.restPinEditDescValue').value = currentRest.description;

          }
        }
        function submitDeleteLodModal(e) {
          console.log(global.lodgings[global.lodgingIndex].id);
          global.socket.emit('delete lodging', global.lodgings[global.lodgingIndex].id)
          document.querySelector('.deleteLodPinModal').style.display = 'none';
        }
        function hideDeleteLodPinModal(e) {
          document.querySelector('.deleteLodPinModal').style.display = 'none';
        }
        function hideDeleteRestPinModal(e) {
          document.querySelector('.deleteRestPinModal').style.display = 'none';
        }
        function showDeleteRestModal(e) {
          if (e.target.classList.contains('restPinDelete')) {
            // console.log(e.target.parentElement.firstChild.nextElementSibling.textContent)
            document.querySelector('.deleteRestPinModal').style.display = 'block';
            let currentRest;
            global.restaurants.forEach(function(rest, index) {
              if (rest.name === e.target.parentElement.firstChild.nextElementSibling.textContent) {
                currentRest = rest;
                global.restIndex = index;
              }
            })
            document.querySelector('.deleteRestPinTitle').textContent = currentRest.name;
          }
        }
        function showDeleteLodPinModal(e) {
          if (e.target.classList.contains('lodPinDelete')) {
            document.querySelector('.deleteLodPinModal').style.display = 'block';
            // console.log(e.target.parentElement.firstChild.nextElementSibling.textContent)
            let currentLodging;
            global.lodgings.forEach(function(lodging, index) {
              if (lodging.name === e.target.parentElement.firstChild.nextElementSibling.textContent) {
                currentLodging = lodging;
                global.lodgingIndex = index;
              }
            })
            document.querySelector('.deleteLodPinTitle').textContent = currentLodging.name;
          }else {
            return;
          }
        }
        function subEditLodModal(e) {
          console.log(global.lodgings[global.lodgingIndex].id)
          global.socket.emit('edit lodging', global.editLodPinModal.querySelector('.lodPinTitle').textContent, global.editLodInputName.value, global.editLodInputRooms.value, global.editLodInputPrice.value, global.editLodInputDesc.value, global.editLodInputLink.value, global.lodgings[global.lodgingIndex].id);
          document.querySelector('.editLodPinModal').style.display = 'none';
        }
        function hideEditLodPinModal(e) {
          document.querySelector('.editLodPinModal').style.display = 'none';
        }
        function showEditLodPinModal(e) {
          if (e.target.classList.contains('lodPinEdit')) {
            console.log(e.target.parentElement.firstChild.nextElementSibling.textContent);
            document.querySelector('.editLodPinModal').style.display = 'block';
            let currentLodging;
            global.lodgings.forEach(function(lodging, index) {
              if (lodging.name == e.target.parentElement.firstChild.nextElementSibling.textContent) {
                global.lodgingIndex = index;
                currentLodging = lodging;
              }
            })
            console.log(currentLodging)
            global.editLodPinModal.querySelector('.lodPinTitle').textContent = currentLodging.name;
            global.editLodPinModal.querySelector('.lodPinEditNameValue').value = currentLodging.name;
            global.editLodPinModal.querySelector('.lodPinEditPriceValue').value = currentLodging.price;
            global.editLodPinModal.querySelector('.lodPinEditRoomsValue').value = currentLodging.rooms;
            global.editLodPinModal.querySelector('.lodPinEditDescValue').value = currentLodging.description;
            global.editLodPinModal.querySelector('.lodPinEditLinkValue').value = currentLodging.link;
          } else {
            return;
          }
        }

        function actSubmit(e) {
          e.preventDefault();
          let actName = document.querySelector('.actName');
          let actPrice = document.querySelector('.actPrice');
          let actType = document.querySelector('.actType');
          let actDescript = document.querySelector('.actDescript');
          let actLink = document.querySelector('.actLink');
          let type = parseInt(actPrice.value);
          // console.log(typeof type)
          let message;
          if ((actName.value === '') || (actPrice.value < 0) || (actDescript.value === '') || (actLink.value === '')) {
            showErrorMessage('Please Fill in All Inputs', 'error', document.querySelector('.actPinnerForm'), document.querySelector('.actPinStart'));
          } else {
            if (actName.value.length < 3 || actName.value.length > 35) {
              message = 'The activity name must be at least 3 characters, but no longer than 35.'
              showErrorMessage(message, 'error', document.querySelector('.actPinnerForm'), document.querySelector('.actPinStart'));
              return;
            }
            if (typeof type != 'number') {
              message = 'Sorry the price field must be in the form of a number';
              showErrorMessage(message, 'error', document.querySelector('.actPinnerForm'), document.querySelector('.actPinStart'));
              actPrice.value = '';
              return;
            }
            if (actDescript.value.length < 10 || actDescript.value > 250) {
              message = 'The Description field must be at least 10 charaters long, but no more than 250.';
              showErrorMessage(message, 'error', document.querySelector('.actPinnerForm'), document.querySelector('.actPinStart'));
              return;
            }
            global.socket.emit('act submit', actName.value, actPrice.value, actDescript.value, actType.value, actLink.value);
            actName.value = '';
            actDescript.value = '';
            actType.value = '';
            actLink.value = '';
            actPrice.value = '';
          }
        }

        function transSubmit(e) {
          e.preventDefault();
          let transName = document.querySelector('.transName');
          let transPrice = document.querySelector('.transPrice');
          let transType = document.querySelector('.transType');
          let transDescript = document.querySelector('.transDescript');
          let transLink = document.querySelector('.transLink');
          if ((transName.value === '') || (transPrice.value <= 0) || (transDescript.value === '') || (transLink.value === '')) {
            showErrorMessage('Please Fill in All Inputs', 'error', document.querySelector('.transPinnerForm'), document.querySelector('.transPinStart'));
          } else {
            global.socket.emit('trans submit', transName.value, transPrice.value, transDescript.value, transType.value, transLink.value);
            transName.value = '';
            transDescript.value = '';
            transType.value = '';
            transLink.value = '';
            transPrice.value = '';
          }
        }

        function restSubmit(e) {
          e.preventDefault();
          let restName = document.querySelector('.restName');
          let restType = document.querySelector('.restType');
          let restDescript = document.querySelector('.restDescript');
          let restLink = document.querySelector('.restLink');
          if ((restName.value === '') || (restDescript.value === '') || (restLink.value === '')) {
            let message = 'Please fill in all inputs';
            let type = 'error';
            let size = '.9rem';
            showErrorMessage(message, type, document.querySelector('.restPinnerForm'), document.querySelector('.restPinStart'));
          } else {
            global.socket.emit('rest submit', restName.value, restDescript.value, restType.value, restLink.value);
            restName.value = '';
            restDescript.value = '';
            restType.value = '';
            restLink.value = '';
          }
        }

        function rentalSubmit(e) {
          e.preventDefault();
          let renName = document.querySelector('.renName');
          let renPrice = document.querySelector('.renPrice');
          let renRooms = document.querySelector('.renRooms');
          let renDescript = document.querySelector('.renDescript');
          let renLink = document.querySelector('.renLink');
          if ((renName.value === '') || (renPrice.value <= 0) || (renRooms.value <= 0) || (renDescript.value === '') || (renLink.value === '')) {
            let message = 'Please fill in all inputs';
            let type = 'error';
            let size = '.9rem';
            showErrorMessage(message, type, document.querySelector('.renPinnerForm'), document.querySelector('.pinStart'));
          } else {
            global.socket.emit('rental submit', renName.value, renPrice.value, renRooms.value, renDescript.value, renLink.value);
            renName.value = '';
            renDescript.value = '';
            renPrice.value = '';
            renRooms.value = '';
            renLink.value = '';
          }
        }

        function changeBudget(e) {
          e.preventDefault();
          if (global.budgetInput.value <= 0) {
            let message = "Sorry, you're new budget must greater than 0.";
            let type = 'error';
            let size = '.9rem'
            showErrorMessage(message, type, global.budgetForm, global.budgetSubmit, size);
            global.budgetInput.value = '';
            return;
          }
          let newBudget = document.querySelector('.budgetInput').value;
          global.budgetInput.value = '';
          global.socket.emit('change budget', newBudget);
          global.budget = newBudget;
          document.querySelector('.budget').textContent = '';
          document.querySelector('.budget').textContent = '$' + newBudget;
          if (global.expenseArray.length > 0) {
            clearOldExpenses();
            populateExpenses(global.expenseArray);
          }
          global.budgetForm.style.display = 'none';
          global.changeBudget.style.display = 'block';
        }
        // Function inserts each expense in a div to dom; as well as a total expenses div at the end
        // which compares to the budget

        function clearOldExpenses() {
          let oldEx = global.results.querySelectorAll('.displayExDiv');
          oldEx.forEach(function(exp) {
            global.results.removeChild(exp);
          })
        }

        function submitExpense(e) {
          e.preventDefault();
          let price = document.querySelector('.calcPrice');
          let name = document.querySelector('.calcName');
          let splits = document.querySelector('.calcDivideBy');
          let pays = document.querySelector('.calcPays');
          let type = document.querySelector('.calcType');
          if (price.value < 1 || splits.value < 1 || pays.value < 1 || type.value === '') {
            let type = 'error';
            let mess = 'Please fill in all inputs';
            let size = '1.35rem;';
            showErrorMessage(mess, type, global.calcDiv, global.expenseForm, size);
            return;
          } else {
            global.socket.emit('submit expense', name.value, price.value, pays.value, splits.value, type.value);
            let oldEx = global.results.querySelectorAll('.displayExDiv');
            oldEx.forEach(function(exp) {
              global.results.removeChild(exp);
            })
            clearOldExpenses();
            global.expenseArray.push(new Expense(name.value, price.value, pays.value, splits.value, type.value));
            name.value = '';
            price.value = '';
            splits.value = '';
            pays.value = '';
          }

        }
        function populateExpenses(arr) {
          let frag = document.createDocumentFragment();
          let fullExpenses = 0;
          let counter = 0;
          arr.forEach(function(a) {
            // arr.push(new Expense(name.textContent, exCosts[index].textContent, exPays[index].textContent, exSplits[index].textContent, exTypes[index].textContent))
            let div = document.createElement('div');
            div.className = 'displayExDiv'
            let nameDiv = document.createElement('h6');
            nameDiv.className = 'displayExName'
            nameDiv.textContent = a.name;
            div.appendChild(nameDiv);
            let tots = document.createElement('div');
            tots.className = 'displayTots'
            tots.textContent = '$ ' + a.totalCost + ' Total ' + a.type + ' Expense:';
            tots.style.fontSize = '1.2rem';
            div.appendChild(tots);
            extras = document.createElement('div');
            extras.textContent = a.pays + ' payments, split ' + a.splits + ' ways.';
            extras.className = 'extras';
            let link = document.createElement('a');
            let xnode = document.createTextNode('Clear');
            link.appendChild(xnode);
            link.className = 'deleteX'
            link.href = '#';
            div.appendChild(extras);
            div.appendChild(link);
            frag.appendChild(div);
            fullExpenses += parseFloat(a.totalCost);
            counter += 1;
          })
          global.results.insertBefore(frag, global.exDelBut);
          global.totExp = new Expenses(fullExpenses, counter);
          populateTotalWithBudget();
        }

        function populateTotalWithBudget() {
          if (global.totExp.total === 0) {
            global.results.style.display = 'none';
            return;
          }
          while (global.totResult.firstChild) {
            global.totResult.removeChild(global.totResult.firstChild)
          }
          if (global.totExp.total === 0) {
            global.results.style.display = 'none';
            return;
          }
          let totFrag = document.createDocumentFragment();
          let title = document.createElement('h4');
          title.textContent = 'Total Expenses';
          let totDiv = document.createElement('div');
          let theBudget = (global.budget - global.totExp.total).toFixed(2);
          let onBudget = document.createElement('div');
          onBudget.appendChild(title);
          let bNode = document.createElement('p');
          let span = document.createElement('span');
          span.textContent = '$' + global.totExp.total.toFixed(2);
          span.style.fontSize = '1.8rem';
          onBudget.appendChild(span);
          let expo;
          if (global.totExp.count === 1) {
            expo = 'expense';
          }else {
            expo = 'expenses';
          }
          if (theBudget >= 0){
            bNode.textContent = 'Your total expenditure, over ' + global.totExp.count + ' ' + expo + '. You are under Budget!! $' + theBudget + ' under your $' + global.budget + ' budget';
            onBudget.style.background = 'cadetblue';
          }else {
            theBudget = (global.totExp.total - global.budget).toFixed(2);
            console.log(global.totExp.total + '  ' + global.budget);
            bNode.textContent = 'Your total expenditure over ' + global.totExp.count + ' ' + expo + ". Oops, you're over budget. $" + theBudget + ' over your $' + global.budget + ' budget';
            onBudget.style.background = '#ff3333';
          }
          onBudget.appendChild(bNode);
          onBudget.className = 'displayTotNum';
          totFrag.appendChild(onBudget);
          global.results.style.display = 'block';
          global.totResult.style.display = 'block';
          global.totResult.appendChild(totFrag);
        }

        function showAllModal(e) {
          global.allExpModal.style.display = 'block';
        }

        function showOneModal(e) {
          if (e.target.className === 'deleteX') {
            e.preventDefault();
            global.oneExpModal.style.display = 'block';
            global.expenseToDelete = e.target.parentElement;
          }else {
            return;
          }
        }

        function noExpModal(e) {
          global.allExpModal.style.display = 'none';
        }

        function noExpModalAll(e) {
          global.oneExpModal.style.display = 'none';
        }

        // Uses socket to send a single delete to server, and deletes the expense from dom.
        function deleteOneExpense(e) {
          global.socket.emit('delete one expense', global.expenseToDelete.firstChild.textContent)
          global.oneExpModal.style.display = 'none';
          let text = global.expenseToDelete.firstChild.textContent;
          console.log(text);
          global.expenseArray.forEach(function(exp, index) {
            if (text === exp.name) {
              global.expenseArray.splice(index, 1);
              global.totExp.count -= 1;
              global.totExp.total -= exp.totalCost;
              populateTotalWithBudget();
            }
          })
          global.expenseToDelete.remove();
        }
        //Deletes all expenses, sends to server over socket, and deletes all expense divs from dom
        function deleteAllExpenses(e) {
          e.preventDefault();
          global.allExpModal.style.display = 'none';
          while (global.results.firstChild) {
            global.results.removeChild(global.results.firstChild)
          }
          global.socket.emit('delete all expenses');
          global.expenseArray = [];
        }
        // makes sure there are values in all inputs


        function showErrorMessage(message, type, parent, before, size) {
          let div = document.createElement('div');
          div.className = (type);
          div.classList += ' alert';
          div.style.fontSize = (size);
          div.appendChild(document.createTextNode(message));
          parent.insertBefore(div, before);
          div.scrollIntoView();
          setTimeout(function(){
              document.querySelector('.alert').remove();
          },5000);
        }


        function newBudget(e) {
          e.preventDefault();
          global.budgetForm.style.display = 'block';
          global.changeBudget.style.display = 'none';
        }

        // List of group members
        for (i=0;i<global.mems.length;i++) {
            global.arr.push(global.mems[i].innerHTML);
        }
        // Function for submitting chat message, sends message to server
        function sendMessage(e) {
          e.preventDefault();
          global.socket.emit('send message', global.message.value);
          global.message.value = ('');
        }
        // On connect, adds user to users, sends message saying user connected
        global.socket.on('on connect', function(data) {
            // Create chat element that says user connected.
            let elem = document.createElement('div');
            elem.innerHTML = '<strong style="text-decoration: underline;">'+data.user+'</strong>:  '+data.msg;
            elem.id = 'chat_message';
            global.chat.appendChild(elem);
            elem.scrollIntoView();
            // Empty out the list of members online in html list.
            while(global.online.firstChild ){
                global.online.removeChild(online.firstChild);
            }
            // Remove all non unique users
            newUsers = Array.from(new Set(data.users));
            // Create elements to display all online users
            let fragment = document.createDocumentFragment();
            for(i=0; i < newUsers.length;i++) {
                  let item = document.createElement('li');
                  item.classList = 'onlineMember ';
                  let tnode = document.createTextNode(data.users[i]);
                  item.appendChild(tnode);
                  fragment.appendChild(item);
            }
            global.online.appendChild(fragment);
        })
        //On disconnect, takes user out of users, sends message saying user disconnected
        global.socket.on('on disconnect', function(data) {
            // Create chat element that says user disconnected
            let elem = document.createElement('div');
            elem.innerHTML = '<strong style="text-decoration: underline;">'+data.user+'</strong>:  '+data.msg;
            elem.id = 'chat_message';
            global.chat.appendChild(elem);
            elem.scrollIntoView();
            // Clear out all online members from html list
            while(global.online.firstChild ){
                global.online.removeChild(online.firstChild );
            }
            // Create all elements for remaining users online
            for(i=0; i < data.users.length;i++){
                let item = document.createElement('li');
                item.className = 'onlineMember';
                let tnode = document.createTextNode(data.users[i]);
                item.appendChild(tnode);
                global.online.appendChild(item);
            }
        })

        global.socket.on('rental saved', function(data) {
          console.log('hi')
          let message = 'Lodging added!!';
          let type = 'success';
          let size = '.9rem';
          showErrorMessage(message, type, document.querySelector('.renPinRow'), document.querySelector('.renPinRow').querySelector('.pinList'), '1rem');
          global.lodgings.push(new global.Lodging(data.name, data.price, data.rooms, data.description, data.link, data.creator, data.id))
          console.log(global.lodgings);
          let frag = document.createDocumentFragment();
          let div = document.createElement('div');
          div.className = 'pinList'
          let h3 = document.createElement('h3')
          h3.textContent = data.name
          h3.classList = 'pinHeader restPinNames'
          div.appendChild(h3);
          let p1 = document.createElement('p');
          let p2 = document.createElement('p');
          let p3 = document.createElement('p');
          let p4 = document.createElement('p');
          p1.textContent = data.rooms + ' bedrooms.';
          p2.textContent = '$' + data.price + ' per night';
          p3.textContent = data.description;
          p4.textContent = 'Posted by: ' + data.creator;
          p1.classList = 'pinP';
          p2.classList = 'pinP';
          p3.classList = 'pinP';
          p4.classList = 'pinP';
          div.appendChild(p1);
          div.appendChild(p2);
          div.appendChild(p3);
          div.appendChild(p4);
          let anchor = document.createElement('A');
          anchor.href = data.link;
          anchor.textContent = 'View at site';
          let div2 = document.createElement('div');
          console.log(global.username + ': ' + data.creator);
          if (global.username === data.creator)
          console.log('hi');
          if (global.username === data.creator) {
            let p5 = document.createElement('p');
            p5.textContent = 'Please refresh the page to edit this pin.'
            div.appendChild(p5);
          }
          frag.appendChild(div);
          document.querySelector('.renPinRow').appendChild(frag);
        })

        global.socket.on('rest saved', function(data) {
          let message = 'Pin added!!';
          let type = 'success';
          let size = '.9rem';
          showErrorMessage(message, type, document.querySelector('.restPinnerForm'), document.querySelector('.restPinStart'));
          let frag = document.createDocumentFragment();
          let div = document.createElement('div');
          div.className = 'pinList';
          let h3 = document.createElement('h3');
          h3.textContent = data.name;
          h3.classList = 'pinHeader restPinNames';
          div.appendChild(h3);
          let p1 = document.createElement('p');
          let p2 = document.createElement('p');
          let p3 = document.createElement('p')
          p1.textContent = data.type;
          p2.textContent = data.description;
          p3.textContent = 'Posted by: ' + data.user;
          p1.classList = 'pinP';
          p2.classList = 'pinP'
          p3.classList = 'pinP'
          div.appendChild(p1);
          div.appendChild(p2);
          div.appendChild(p3);
          let anchor = document.createElement('A');
          anchor.href = data.link;
          anchor.textContent = 'View at site';
          div.appendChild(anchor);
          frag.appendChild(div);
          document.querySelector('.restPinRow').appendChild(frag);
          global.restaurants.push(new global.Restaurant(data.name, data.type, data.description, data.link, data.user, data.id));
          console.log(global.restaurants);
        })

        global.socket.on('trans saved', function(data) {
          let message = 'Pin added!!';
          let type = 'success';
          let size = '.9rem';
          showErrorMessage(message, type, document.querySelector('.transPinnerForm'), document.querySelector('.transPinStart'));
          let frag = document.createDocumentFragment();
          let div = document.createElement('div');
          div.className = 'pinList'
          let h3 = document.createElement('h3')
          h3.textContent = data.name;
          div.appendChild(h3);
          let p2 = document.createElement('p');
          let p3 = document.createElement('p');
          let p4 = document.createElement('p');
          let p5 = document.createElement('p');
          p2.textContent = '$' + data.price;
          p3.textContent = data.description;
          p4.textContent = data.type;
          p5.textContent = 'Posted by: '; + data.user;
          div.appendChild(p2);
          div.appendChild(p3);
          div.appendChild(p4);
          let anchor = document.createElement('A');
          anchor.href = data.link;
          anchor.textContent = 'View at site';
          div.appendChild(anchor);
          frag.appendChild(div);
          document.querySelector('.transPinRow').appendChild(frag);
          global.transpos.push(new global.Transport(data.name, data.price, data.type, data.description, data.link, data.user, data.id))
          console.log(global.transpos);
        })

        global.socket.on('act saved', function(data) {
          let message = 'Pin added!!';
          let type = 'success';
          let size = '.9rem';
          showErrorMessage(message, type, document.querySelector('.actPinnerForm'), document.querySelector('.actPinStart'));
          let frag = document.createDocumentFragment();
          let div = document.createElement('div');
          div.className = 'pinList'
          let h3 = document.createElement('h3')
          h3.textContent = data.name;
          div.appendChild(h3);
          let p2 = document.createElement('p');
          let p3 = document.createElement('p');
          let p4 = document.createElement('p');
          let p5 = document.createElement('p');
          p2.textContent = '$' + data.price;
          p3.textContent = data.description;
          p4.textContent = data.type
          p5.textContent = 'Posted by: ' + global.username;
          div.appendChild(p2);
          div.appendChild(p3);
          div.appendChild(p4);
          let anchor = document.createElement('A');
          anchor.href = data.link;
          anchor.textContent = 'View at site';
          div.appendChild(anchor);
          frag.appendChild(div);
          document.querySelector('.actPinRow').appendChild(frag);
          global.activities.push(new global.Activity(data.name, data.price, data.type, data.description, data.link, global.username, data.id))
          console.log(global.activities);
        })

        global.socket.on('lodging edited', function(data) {
          // console.log(data.id)
          let message = 'Lodging Edited!'
          let currentIndex = global.lodgings.findIndex(lodging => lodging.id === data.id);
          let newLodge = global.lodgings[currentIndex];
          document.querySelectorAll('.lodPinNames')[currentIndex].textContent = data.newName;
          document.querySelectorAll('.lodPinNames')[currentIndex].href = data.link;
          document.querySelectorAll('.lodPinDispRooms')[currentIndex].textContent = data.rooms + ' Bedrooms';
          document.querySelectorAll('.lodPinDispPrices')[currentIndex].textContent = '$' + data.price + ' per night.'
          global.lodPinDescs[currentIndex].textContent = data.description;
          global.lodPinLinks[currentIndex].textContent = data.link;
          newLodge.name = data.newName;
          newLodge.rooms = data.rooms;
          newLodge.price = data.price;
          newLodge.description = data.description;
          newLodge.link = data.link;
          global.lodgings[currentIndex] = newLodge;
          console.log(currentIndex);
          console.log(global.lodgings);
          // document.querySelectorAll('.renPinRow')[global.lodgingIndex].querySelector('.pinLinkP').href = data.link;
          showErrorMessage(message, 'success', document.querySelector('.renPinRow'), document.querySelector('.renPinRow').querySelectorAll('.pinList')[currentIndex], '1rem');
        })
        global.socket.on('lodging deleted', function(data) {
          let currentIndex = global.lodgings.findIndex(lodging => lodging.id === data.id);
          global.lodgings.splice(currentIndex, 1);
          document.querySelectorAll('.lodPins')[currentIndex].remove();
          let message = 'Lodging Deleted';
          showErrorMessage(message, 'success', document.querySelector('.renPinRow'), document.querySelector('.renPinRow').querySelectorAll('.pinList')[currentIndex], '1rem');
        })

        global.socket.on('not lodge pin creator', function(data) {
          let currentIndex = global.lodgings.findIndex(lodging => lodging.id === data.id);
          let message = 'Sorry, you cannot edit or delete that pin, you are not the creator.';
          showErrorMessage(message, 'error', document.querySelector('.renPinRow'), document.querySelector('.renPinRow').querySelectorAll('.pinList')[currentIndex], '1rem');
        })

        global.socket.on('restaurant edited', function(data) {
          let message = 'Restaurant Edited';
          showErrorMessage(message, 'success', document.querySelector('.restPinRow'), document.querySelector('.restPinRow').querySelector('.pinList'), '1rem');
          let currentIndex = global.restaurants.findIndex(rest => rest.id === data.id);
          let newRest = global.restaurants[currentIndex];
          console.log(currentIndex);
          document.querySelectorAll('.restPinNames')[currentIndex].textContent = data.newName;
          document.querySelectorAll('.restPinNames')[currentIndex].href = data.link;
          document.querySelectorAll('.restPinLinks')[currentIndex].textContent = data.link;
          document.querySelectorAll('.restPinDescriptions')[currentIndex].textContent = data.description;
          document.querySelectorAll('.restPinTypes')[currentIndex].textContent = data.type;
          newRest.name = data.newName;
          newRest.link = data.link;
          newRest.description = data.description;
          newRest.type = data.type;
          global.restaurants[currentIndex] = newRest;
          document.querySelectorAll('.restPins')[currentIndex].querySelector('.pinLinkP').href = data.link;
          console.log(global.restaurants);
        })

        global.socket.on('restaurant deleted', function(data) {
          let currentIndex = global.restaurants.findIndex(rest => rest.id === data.id);
          document.querySelectorAll('.restPins')[currentIndex].remove();
          global.restaurants.splice(currentIndex, 1);
          let message = 'Restaurant Deleted';
          showErrorMessage(message, 'success', document.querySelector('.restPinRow'), document.querySelector('.restPinRow').querySelectorAll('.pinList')[currentIndex], '1rem');
        })

        global.socket.on('not rest pin creator', function(data) {
          let currentIndex = global.restaurants.findIndex(rest => rest.id === data.id);
          let message = 'Sorry, you cannot edit or delete that pin, you are not the creator.';
          showErrorMessage(message, 'error', document.querySelector('.restPinRow'), document.querySelector('.restPinRow').querySelectorAll('.pinList')[currentIndex], '1rem');
        })

        global.socket.on('transpo edited', function(data) {
          let currentIndex = global.transpos.findIndex(trans => trans.id === data.id);
          let newTranspo = global.transpos[currentIndex];
          document.querySelectorAll('.transPinNames')[currentIndex].textContent = data.newName;
          document.querySelectorAll('.transPinNames')[currentIndex].href = data.link;
          document.querySelectorAll('.transPinPrice')[currentIndex].textContent = data.price;
          document.querySelectorAll('.transPinPriceDisp')[currentIndex].textContent = '$' + data.price;
          document.querySelectorAll('.transPinLinks')[currentIndex].textContent = data.link;
          document.querySelectorAll('.transPinDescs')[currentIndex].textContent = data.description;
          document.querySelectorAll('.transPinTypes')[currentIndex].textContent = data.type;
          newTranspo.name = data.newName;
          newTranspo.price = data.price;
          newTranspo.link = data.link;
          newTranspo.description = data.description;
          newTranspo.type = data.type;
          global.transpos[currentIndex] = newTranspo;
          console.log(global.transpos);
          let message = 'Transportation Edited';
          showErrorMessage(message, 'success', document.querySelector('.transPinRow'), document.querySelector('.transPinRow').querySelector('.pinList'), '1rem')
        })

        global.socket.on('trans pin deleted', function(data) {
          let message = 'Transportion Deleted';
          showErrorMessage(message, 'success', document.querySelector('.transPinRow'), document.querySelector('.transPinRow').querySelector('.pinList'), '1rem');
          let currentIndex = global.transpos.findIndex(trans => trans.id === data.id);
          document.querySelectorAll('.transPins')[currentIndex].remove();
          global.transpos.splice(currentIndex, 1);
          console.log(global.transpos);
        })

        global.socket.on('not transpo pin creator', function(data) {
          let currentIndex = global.transpos.findIndex(trans => trans.id === data.id);
          let message = 'Sorry, you cannot  edit or delete that pin, you are not the creator.';
          showErrorMessage(message, 'error', document.querySelector('.transPinRow'), document.querySelector('.transPinRow').querySelectorAll('.pinList')[currentIndex], '1rem');
        })

        global.socket.on('act pin edited', function(data) {
          let message = 'Activity Edited';
          showErrorMessage(message, 'success', document.querySelector('.actPinRow'), document.querySelector('.actPinRow').querySelector('.pinList'), '1rem');
          let currentIndex = global.activities.findIndex(act => act.id === data.id);
          let newAct = global.activities[currentIndex]
          newAct.name = data.newName;
          newAct.type = data.newType;
          newAct.description = data.newDescription;
          newAct.link = data.newLink;
          newAct.price = data.newPrice;
          global.activities[currentIndex] = newAct;
          document.querySelectorAll('.actPinNames')[currentIndex].textContent = data.newName;
          document.querySelectorAll('.actPinPriceDisplay')[currentIndex].textContent = '$' + data.newPrice;
          document.querySelectorAll('.actPinTypes')[currentIndex].textContent = data.newType;
          document.querySelectorAll('.actPinDescriptions')[currentIndex].textContent = data.newDescription;
          document.querySelectorAll('.actPinLinks')[currentIndex].textContent = data.newLink;
        })

        global.socket.on('act pin deleted', function(data) {
          let message = 'Activity Deleted';
          showErrorMessage(message, 'success', document.querySelector('.actPinRow'), document.querySelector('.actPinRow').querySelector('.pinList'), '1rem');
          let currentIndex = global.activities.findIndex(act => act.id === data.id);
          let newAct = global.activities[currentIndex];
          document.querySelectorAll('.actPins')[currentIndex].remove();
          global.activities.splice(currentIndex, 1);
          console.log(global.activities);
        })

        global.socket.on('not act pin creator', function(data) {
          let currentIndex;
          global.activities.forEach(function(act, index) {
            if (act.id == data.id) {
              currentIndex = index;
            }
          })
          let message = 'Sorry, you cannot edit or delete that pin, you are not the creator.'
          showErrorMessage(message, 'error', document.querySelector('.actPinRow'), document.querySelector('.actPinRow').querySelectorAll('.pinList')[currentIndex], '1rem')
        })

        // Function to display the message
        global.socket.on('new message', function(data) {
            // Create chat element and append into chat.
            let elem = document.createElement('div');
            elem.innerHTML = '<strong style="text-decoration: underline;">'+data.user+'</strong>:  '+data.msg;
            elem.id = 'chat_message';
            global.chat.appendChild(elem);
            elem.scrollIntoView();
        })
        global.socket.on('expense saved', function(data) {
          let div = document.createElement('div');
          div.classList = 'success alert';
          div.appendChild(document.createTextNode('Expense Added!!'))
          div.style.fontSize = '1.5rem';
          global.calcDiv.appendChild(div);
          setTimeout(function(){
              document.querySelector('.alert').remove();
          },5000);
          populateExpenses(global.expenseArray);
        })
        global.socket.on('budget changed', function(data) {
          let div = document.createElement('div');
          div.classList = 'success alert';
          div.appendChild(document.createTextNode('Budget Updated'));
          global.budgetDiv.appendChild(div);
          setTimeout(function(){
               document.querySelector('.alert').remove();
           },5000);
        })
        global.socket.on('allDeleted', function(data) {
          let div = document.createElement('div');
          div.classList = 'error alert';
          div.appendChild(document.createTextNode('All Expenses Deleted!'));
          global.results.appendChild(div);
          setTimeout(function(){
               document.querySelector('.alert').remove();
           },5000);
        })
        global.socket.on('oneDeleted', function(data) {
          let div = document.createElement('div');
          div.classList = 'error alert';
          div.appendChild(document.createTextNode('Expense Deleted!'));
          global.results.insertBefore(div, global.exDelBut);
          setTimeout(function(){
              document.querySelector('.alert').remove();
          },5000);
        })
        if (global.groupPageFlash != null){
            global.groupPageFlash.style.marginLeft = '24%';
            global.groupPageFlash.style.marginRight = '30%';
            global.groupPageFlash.style.marginTop = '10%';
        }

    }
  </script>
  {% endblock %}
